<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Book a Service | SouthEnd Climate Co. ‚Äì Charlotte, NC</title>
  <meta name="description" content="Book HVAC service online. Real-time availability, secure deposit, and instant confirmation with SouthEnd Climate Co.">
  <link rel="stylesheet" href="css/southend.css">
</head>
<body class="theme-southend">
  <div class="mock-demo-banner" id="mock-demo-banner">
    <div class="mock-demo-banner-inner">
      <span>This is a demonstration site built by H4 Services to showcase our Premium package. Ready to get a site like this for your business?</span>
      <a href="https://www.h4services.co/get-started.html?utm_source=h4demo&utm_medium=examples&utm_campaign=hvac-southend" class="mock-demo-banner-cta">Get Started ‚Üí</a>
      <button type="button" class="mock-demo-banner-close" aria-label="Dismiss" onclick="document.getElementById('mock-demo-banner').classList.add('is-dismissed')">√ó</button>
    </div>
  </div>
  <a href="https://www.h4services.co/case-studies.html?utm_source=h4demo&utm_medium=examples&utm_campaign=hvac-southend" class="mock-return-banner">Return to H4Services</a>

  <header class="se-header">
    <div class="se-header-inner">
      <a href="mock-hvac-southend.html" class="se-logo">
        <svg class="se-logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M12 2C8 6 6 10 6 14c0 3.3 2.7 6 6 6s6-2.7 6-6c0-4-2-8-6-12z"/><path d="M12 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
        SouthEnd Climate Co.
      </a>
      <a href="tel:+17045550192" class="se-header-phone">(704) 555-0192</a>
      <button type="button" class="se-menu-toggle" aria-label="Open menu">‚ò∞</button>
      <nav class="se-nav">
        <a href="mock-hvac-southend.html">Home</a>
        <a href="mock-hvac-southend-services.html">Services</a>
        <a href="mock-hvac-southend-about.html">About</a>
        <a href="mock-hvac-southend-book.html" class="se-nav-book">Book</a>
        <a href="mock-hvac-southend-portal.html">Portal</a>
        <a href="mock-hvac-southend-contact.html">Contact</a>
        <a href="case-studies.html" class="se-back">‚Üê Example sites</a>
      </nav>
    </div>
  </header>

  <main class="se-book-wrap">
    <div class="se-container" style="text-align: center;">
      <span class="se-book-venu-badge">Powered by Venu+</span>
    </div>

    <div class="se-book-whats-wrap">
      <button type="button" class="se-book-whats-toggle" id="se-whats-toggle" aria-expanded="false" aria-controls="se-whats-content">
        <span>What's included (Venu+)</span>
        <span class="se-book-whats-chevron" aria-hidden="true"></span>
      </button>
      <div class="se-book-whats-content" id="se-whats-content" hidden>
        <p style="margin:0 0 0.5rem;">This business uses <strong>Venu+</strong>. You get:</p>
        <ul>
          <li>Stripe payment &amp; deposit to confirm your booking</li>
          <li>Cancellation policy enforced automatically</li>
          <li>Customer portal ‚Äî view history, pay balance, rebook</li>
          <li>Payment history &amp; invoices in one place</li>
          <li>SMS reminders (confirmation, deadline, day-of)</li>
        </ul>
      </div>
    </div>

    <!-- Step 1: Service -->
    <section class="se-book-step" id="se-step-service" aria-labelledby="se-services-heading">
      <h2 id="se-services-heading" class="se-book-headline">Choose Your Service</h2>
      <div class="se-book-service-menu" role="listbox" aria-label="Select a service">
        <div class="se-book-menu-divider">‚Äî REPAIR &amp; DIAGNOSIS ‚Äî</div>
        <button type="button" class="se-book-service-row" role="option" data-service="AC Repair" data-price="89" data-duration="1‚Äì3 hours">
          <span class="se-book-service-info"><span class="se-book-service-name">AC Repair</span><span class="se-book-service-meta">1‚Äì3 hours</span></span>
          <span class="se-book-service-price">$89+</span>
        </button>
        <button type="button" class="se-book-service-row" role="option" data-service="Heating Repair" data-price="89" data-duration="1‚Äì3 hours">
          <span class="se-book-service-info"><span class="se-book-service-name">Heating Repair</span><span class="se-book-service-meta">1‚Äì3 hours</span></span>
          <span class="se-book-service-price">$89+</span>
        </button>
        <button type="button" class="se-book-service-row" role="option" data-service="Emergency Service" data-price="149" data-duration="24/7" data-emergency="1">
          <span class="se-book-service-info"><span class="se-book-service-name">Emergency Service</span><span class="se-book-service-meta">24/7</span></span>
          <span class="se-book-service-price">$149+</span>
        </button>
        <div class="se-book-menu-divider">‚Äî INSTALLATION ‚Äî</div>
        <button type="button" class="se-book-service-row" role="option" data-service="AC Installation" data-price="3500" data-duration="Half-day to full-day">
          <span class="se-book-service-info"><span class="se-book-service-name">AC Installation</span><span class="se-book-service-meta">Half-day to full-day</span></span>
          <span class="se-book-service-price">From $3,500</span>
        </button>
        <button type="button" class="se-book-service-row" role="option" data-service="Heating Installation" data-price="3200" data-duration="Half-day to full-day">
          <span class="se-book-service-info"><span class="se-book-service-name">Heating Installation</span><span class="se-book-service-meta">Half-day to full-day</span></span>
          <span class="se-book-service-price">From $3,200</span>
        </button>
        <button type="button" class="se-book-service-row" role="option" data-service="Thermostat Installation" data-price="149" data-duration="1 hour">
          <span class="se-book-service-info"><span class="se-book-service-name">Thermostat Installation</span><span class="se-book-service-meta">1 hour</span></span>
          <span class="se-book-service-price">$149+</span>
        </button>
        <div class="se-book-menu-divider">‚Äî MAINTENANCE ‚Äî</div>
        <button type="button" class="se-book-service-row" role="option" data-service="Seasonal Tune-Up" data-price="129" data-duration="1 hour" data-has-addons="1">
          <span class="se-book-service-info"><span class="se-book-service-name">Seasonal Tune-Up</span><span class="se-book-service-meta">1 hour</span></span>
          <span class="se-book-service-price">$129</span>
        </button>
        <button type="button" class="se-book-service-row" role="option" data-service="Duct Cleaning" data-price="299" data-duration="2‚Äì4 hours">
          <span class="se-book-service-info"><span class="se-book-service-name">Duct Cleaning</span><span class="se-book-service-meta">2‚Äì4 hours</span></span>
          <span class="se-book-service-price">$299+</span>
        </button>
        <button type="button" class="se-book-service-row" role="option" data-service="Air Quality Assessment" data-price="149" data-duration="1‚Äì2 hours">
          <span class="se-book-service-info"><span class="se-book-service-name">Air Quality Assessment</span><span class="se-book-service-meta">1‚Äì2 hours</span></span>
          <span class="se-book-service-price">$149</span>
        </button>
      </div>

      <div class="se-book-deposit-wrap" id="se-deposit-wrap" hidden>
        <div class="se-book-deposit-callout">
          <p class="se-book-venu-feature">‚ö° Venu+ Feature</p>
          <p class="se-book-deposit-title">‚ú¶ SouthEnd Climate Co. Booking Policy</p>
          <p>A deposit is required to hold your appointment:</p>
          <ul>
            <li>Services under $200 ‚Üí $25 deposit</li>
            <li>Services $200‚Äì$499 ‚Üí $50 deposit</li>
            <li>Services $500+ ‚Üí $100 deposit</li>
            <li>Emergency Service ‚Üí $149 (full emergency fee, applied to total)</li>
          </ul>
          <p>Your deposit is applied to your service total.</p>
          <p>Free cancellation up to 24 hours before your appointment.</p>
          <p>Cancellations within 24 hours or no-shows ‚Üí deposit forfeited.</p>
          <p class="se-book-deposit-dynamic">Deposit due today: <strong id="se-deposit-amount">$0</strong></p>
        </div>
      </div>

      <div class="se-book-addons-wrap" id="se-addons-wrap" hidden>
        <button type="button" class="se-book-addons-toggle" id="se-addons-toggle" aria-expanded="false" aria-controls="se-addons-content">
          <span>Enhance your visit</span>
          <span class="se-book-addons-chevron" aria-hidden="true"></span>
        </button>
        <div class="se-book-addons-content" id="se-addons-content" hidden>
          <label class="se-book-addon-row"><input type="checkbox" class="se-book-addon-cb" name="addon" value="Filter replacement" data-price="35"> Filter replacement +$35</label>
          <label class="se-book-addon-row"><input type="checkbox" class="se-book-addon-cb" name="addon" value="Duct inspection" data-price="49"> Duct inspection +$49</label>
        </div>
      </div>
    </section>

    <!-- Step 2: Schedule -->
    <section class="se-book-step" id="se-step-schedule" hidden aria-labelledby="se-schedule-heading">
      <nav class="se-book-progress" aria-label="Booking steps">
        <span class="se-book-progress-step is-complete"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Service</span></span>
        <span class="se-book-progress-line" aria-hidden="true"></span>
        <span class="se-book-progress-step is-current"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Schedule</span></span>
        <span class="se-book-progress-line"></span>
        <span class="se-book-progress-step"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Payment</span></span>
        <span class="se-book-progress-line"></span>
        <span class="se-book-progress-step"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Confirmed</span></span>
      </nav>
      <p class="se-book-summary-bar" id="se-summary-bar-text">Service ‚Ä¢ Duration ‚Ä¢ Total ‚Ä¢ Deposit due at next step</p>
      <h2 id="se-schedule-heading" class="se-book-headline">Choose Your Date &amp; Time</h2>
      <div class="se-book-calendar-wrap">
        <div class="se-book-calendar-header">
          <button type="button" class="se-book-cal-prev" id="se-cal-prev" aria-label="Previous month">‚Äπ</button>
          <h3 class="se-book-calendar-month" id="se-calendar-month">February 2026</h3>
          <button type="button" class="se-book-cal-next" id="se-cal-next" aria-label="Next month">‚Ä∫</button>
        </div>
        <div class="se-book-calendar-weekdays" aria-hidden="true"><span>M</span><span>T</span><span>W</span><span>T</span><span>F</span><span>S</span><span>S</span></div>
        <div class="se-book-calendar-days" id="se-calendar-days" role="grid"></div>
      </div>
      <div class="se-book-times-wrap" id="se-times-wrap" hidden>
        <h3 class="se-book-times-headline">Available Times</h3>
        <ul class="se-book-time-list" role="listbox">
          <li><button type="button" class="se-book-time-row" data-time="8:00 AM" data-min="480">8:00 AM <span class="se-book-time-status">‚óã Available</span></button></li>
          <li><button type="button" class="se-book-time-row se-book-time-unavail" disabled>9:00 AM <span class="se-book-time-status">‚úï Unavailable</span></button></li>
          <li><button type="button" class="se-book-time-row" data-time="10:00 AM" data-min="600">10:00 AM <span class="se-book-time-status">‚óã Available</span></button></li>
          <li><button type="button" class="se-book-time-row" data-time="12:00 PM" data-min="720">12:00 PM <span class="se-book-time-status">‚óã Available</span></button></li>
          <li><button type="button" class="se-book-time-row" data-time="1:00 PM" data-min="780">1:00 PM <span class="se-book-time-status">‚óã Available</span></button></li>
          <li><button type="button" class="se-book-time-row se-book-time-unavail" disabled>2:00 PM <span class="se-book-time-status">‚úï Unavailable</span></button></li>
          <li><button type="button" class="se-book-time-row" data-time="3:00 PM" data-min="900">3:00 PM <span class="se-book-time-status">‚óã Available</span></button></li>
        </ul>
      </div>
      <div class="se-book-cancel-card" id="se-cancel-card" hidden>
        <p class="se-book-venu-feature">‚ö° Venu+ automatically calculates and enforces your cancellation window</p>
        <p><strong>Free cancellation deadline:</strong></p>
        <p id="se-cancel-deadline">‚Äî</p>
        <p>After this time, your <strong id="se-cancel-deposit">$0</strong> deposit will be retained per SouthEnd's policy.</p>
      </div>
      <div style="text-align:center; margin-top:1rem;">
        <button type="button" class="se-btn-primary" id="se-continue-payment-btn" disabled>Continue to Payment ‚Üí</button>
      </div>
    </section>

    <!-- Step 3: Payment -->
    <section class="se-book-step" id="se-step-payment" hidden aria-labelledby="se-payment-heading">
      <nav class="se-book-progress" aria-label="Booking steps">
        <span class="se-book-progress-step is-complete"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Service</span></span>
        <span class="se-book-progress-line"></span>
        <span class="se-book-progress-step is-complete"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Schedule</span></span>
        <span class="se-book-progress-line"></span>
        <span class="se-book-progress-step is-current"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Payment</span></span>
        <span class="se-book-progress-line"></span>
        <span class="se-book-progress-step"><span class="se-book-progress-dot"></span><span class="se-book-progress-label">Confirmed</span></span>
      </nav>
      <h2 id="se-payment-heading" class="se-book-headline">Secure Payment</h2>
      <p style="text-align:center; margin:0 0 1.5rem;" id="se-payment-subhead">A deposit confirms your appointment.</p>
      <div class="se-book-confirm-card">
        <p><strong id="se-confirm-service">‚Äî</strong></p>
        <p id="se-confirm-datetime">‚Äî</p>
        <div class="se-book-confirm-divider"></div>
        <div class="se-book-confirm-row"><span>Service Total</span><span id="se-confirm-total">$0.00</span></div>
        <div class="se-book-confirm-row"><span>Deposit Due Now</span><span id="se-confirm-deposit">$0.00</span></div>
        <div class="se-book-confirm-row"><span>Balance at Appointment</span><span id="se-confirm-balance">$0.00</span></div>
        <div class="se-book-confirm-divider"></div>
        <div class="se-book-confirm-row"><span>Cancellation Deadline</span><span id="se-confirm-deadline">‚Äî</span></div>
        <p style="margin:0.75rem 0 0; font-size:0.9rem; color:var(--se-charcoal);" id="se-confirm-print">Deposits are processed securely via Stripe.</p>
      </div>
      <form class="se-form se-book-payment-form" id="se-payment-form">
        <div class="se-form-group">
          <label for="se-card-name">Full name on card</label>
          <input type="text" id="se-card-name" name="cardName" placeholder="e.g. Jane Smith" autocomplete="cc-name">
        </div>
        <div class="se-form-group">
          <label for="se-card-number">Card number</label>
          <input type="text" id="se-card-number" name="cardNumber" placeholder="4242 4242 4242 4242" inputmode="numeric" maxlength="19" autocomplete="cc-number">
        </div>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:1rem;">
          <div class="se-form-group">
            <label for="se-card-expiry">Expiry (MM/YY)</label>
            <input type="text" id="se-card-expiry" name="expiry" placeholder="MM/YY" inputmode="numeric" maxlength="7" autocomplete="cc-exp">
          </div>
          <div class="se-form-group">
            <label for="se-card-cvc">CVC</label>
            <input type="text" id="se-card-cvc" name="cvc" placeholder="123" inputmode="numeric" maxlength="4" autocomplete="cc-csc">
          </div>
        </div>
        <div class="se-form-group">
          <label for="se-card-zip">Billing ZIP</label>
          <input type="text" id="se-card-zip" name="zip" placeholder="28203" inputmode="numeric" maxlength="10" autocomplete="postal-code">
        </div>
        <button type="submit" class="se-book-pay-btn" id="se-pay-btn"><span id="se-pay-btn-text">Pay Deposit</span></button>
      </form>
      <p class="se-book-trust-row">üîí Secured by Stripe ¬∑ 256-bit encryption ¬∑ SouthEnd Climate Co. never stores card data</p>
      <p style="font-size:0.8rem; color:var(--se-sage); margin-top:0.5rem;">Stripe ¬∑ Venu+</p>
      <div class="se-book-what-happens-wrap">
        <button type="button" class="se-book-what-happens-toggle" id="se-what-happens-toggle" aria-expanded="false" aria-controls="se-what-happens-content">
          What happens after I pay?
        </button>
        <div class="se-book-what-happens-content" id="se-what-happens-content" hidden>
          <ol>
            <li>Instant confirmation text to your phone</li>
            <li>Reminder sent before your cancellation deadline</li>
            <li>Day-of reminder 2 hours before</li>
            <li>Your SouthEnd portal activates ‚Äî view history, manage appointments</li>
            <li>Post-visit: leave a review, rebook with one tap</li>
          </ol>
          <p style="margin:0.75rem 0 0; font-size:0.85rem; color:var(--se-copper);">‚ö° This deposit is automatically enforced by Venu+. If cancelled after deadline, the deposit is retained per SouthEnd's booking policy.</p>
        </div>
      </div>
    </section>

    <!-- Step 4: Confirmation -->
    <section class="se-book-step se-book-success" id="se-step-success" hidden aria-live="polite">
      <svg class="se-book-success-check" viewBox="0 0 52 52" aria-hidden="true">
        <circle cx="26" cy="26" r="24" fill="none" stroke="currentColor" stroke-width="2"/>
        <path fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M14 27 l8 8 16-18"/>
      </svg>
      <h2>You're booked at SouthEnd Climate Co.</h2>
      <p>Confirmation sent to your phone</p>
      <div class="se-book-success-recap" id="se-success-recap">
        <p><span id="se-success-service">‚Äî</span> ¬∑ <span id="se-success-date">‚Äî</span> ¬∑ <span id="se-success-time">‚Äî</span></p>
        <p>Deposit paid: <span id="se-success-deposit">‚Äî</span> ‚úì</p>
        <p>Balance due at appointment: <span id="se-success-balance">‚Äî</span></p>
        <p>Cancellation deadline: <span id="se-success-deadline">‚Äî</span></p>
      </div>
      <div class="se-book-success-actions">
        <a href="#" class="se-btn-secondary" id="se-success-calendar">Add to Calendar</a>
        <a href="mock-hvac-southend-portal.html" class="se-btn-primary" id="se-success-portal">View My SouthEnd Portal</a>
      </div>
    </section>
  </main>

  <div class="se-book-sticky-bar" id="se-sticky-bar" role="status">
    <div class="se-book-sticky-bar-inner">
      <p class="se-book-sticky-bar-text" id="se-sticky-text">Select a service to continue</p>
      <button type="button" class="se-book-sticky-bar-btn" id="se-sticky-btn" disabled>Choose Your Time ‚Üí</button>
    </div>
  </div>

  <footer class="se-footer">
    <div class="se-footer-inner">
      <div><h4>SouthEnd Climate Co.</h4><p>Charlotte, NC</p><p>Climate done right.</p></div>
      <div><h4>Quick links</h4><p><a href="mock-hvac-southend.html">Home</a></p><p><a href="mock-hvac-southend-services.html">Services</a></p><p><a href="mock-hvac-southend-about.html">About</a></p><p><a href="mock-hvac-southend-book.html">Book</a></p><p><a href="mock-hvac-southend-portal.html">Portal</a></p><p><a href="mock-hvac-southend-contact.html">Contact</a></p></div>
      <div><h4>Contact</h4><p>Charlotte, NC</p><p>Mon‚ÄìFri 7AM‚Äì6PM ¬∑ Sat 8AM‚Äì2PM</p><p>Emergency 24/7</p></div>
      <p class="se-footer-disclaimer">This is an example site built by H4 Services. Not a real business. <a href="https://www.h4services.co/case-studies.html?utm_source=h4demo&utm_medium=examples&utm_campaign=hvac-southend">View more examples</a> ¬∑ <a href="https://www.h4services.co/get-started.html?utm_source=h4demo&utm_medium=examples&utm_campaign=hvac-southend">Get your own site</a></p>
    </div>
  </footer>

  <script>
(function() {
  var MONTH_NAMES = ['','January','February','March','April','May','June','July','August','September','October','November','December'];
  var today = new Date();
  var DEMO_TODAY = { year: today.getFullYear(), month: today.getMonth() + 1, day: today.getDate() };

  function getDeposit(price, isEmergency) {
    if (isEmergency) return 149;
    if (price < 200) return 25;
    if (price < 500) return 50;
    return 100;
  }
  function getAddonsTotal() {
    var t = 0;
    document.querySelectorAll('.se-book-addon-cb:checked').forEach(function(cb) { t += parseInt(cb.getAttribute('data-price')||0,10); });
    return t;
  }
  function getTotal() {
    return (state.servicePrice || 0) + getAddonsTotal();
  }

  var state = {
    serviceName: null, servicePrice: 0, serviceDuration: null, isEmergency: false, hasAddons: false,
    calYear: DEMO_TODAY.year, calMonth: DEMO_TODAY.month,
    selectedDay: null, selectedDateLabel: null, selectedTime: null, selectedTimeMin: null,
    currentStep: 1
  };

  var depositWrap = document.getElementById('se-deposit-wrap');
  var depositAmountEl = document.getElementById('se-deposit-amount');
  var addonsWrapEl = document.getElementById('se-addons-wrap');
  var addonsToggle = document.getElementById('se-addons-toggle');
  var addonsContent = document.getElementById('se-addons-content');
  var stepService = document.getElementById('se-step-service');
  var stepSchedule = document.getElementById('se-step-schedule');
  var stepPayment = document.getElementById('se-step-payment');
  var stepSuccess = document.getElementById('se-step-success');
  var summaryBarText = document.getElementById('se-summary-bar-text');
  var calendarDaysEl = document.getElementById('se-calendar-days');
  var calendarMonthEl = document.getElementById('se-calendar-month');
  var timesWrap = document.getElementById('se-times-wrap');
  var cancelCard = document.getElementById('se-cancel-card');
  var cancelDeadlineEl = document.getElementById('se-cancel-deadline');
  var cancelDepositEl = document.getElementById('se-cancel-deposit');
  var continuePaymentBtn = document.getElementById('se-continue-payment-btn');
  var stickyBar = document.getElementById('se-sticky-bar');
  var stickyText = document.getElementById('se-sticky-text');
  var stickyBtn = document.getElementById('se-sticky-btn');
  var paymentForm = document.getElementById('se-payment-form');
  var payBtn = document.getElementById('se-pay-btn');
  var payBtnText = document.getElementById('se-pay-btn-text');

  function updateUI() {
    var total = getTotal();
    var deposit = state.serviceName ? getDeposit(state.servicePrice, state.isEmergency) : 0;
    var balance = total - deposit;
    if (depositWrap) depositWrap.hidden = !state.serviceName;
    if (depositAmountEl && state.serviceName) depositAmountEl.textContent = '$' + deposit;
    if (addonsWrapEl) addonsWrapEl.hidden = !state.hasAddons;
    if (!stickyText || !stickyBtn) return;
    if (!state.serviceName) {
      stickyText.textContent = 'Select a service to continue';
      stickyBtn.textContent = 'Choose Your Time ‚Üí';
      stickyBtn.disabled = true;
      return;
    }
    stickyText.textContent = state.serviceName + '  ¬∑  Deposit: $' + deposit + '  ¬∑  Balance at appointment: $' + balance;
    stickyBtn.textContent = 'Choose Your Time ‚Üí';
    stickyBtn.disabled = false;
  }

  document.querySelectorAll('.se-book-service-row').forEach(function(row) {
    row.addEventListener('click', function() {
      document.querySelectorAll('.se-book-service-row').forEach(function(r) { r.classList.remove('is-selected'); });
      row.classList.add('is-selected');
      state.serviceName = row.getAttribute('data-service');
      state.servicePrice = parseInt(row.getAttribute('data-price')||0, 10);
      state.serviceDuration = row.getAttribute('data-duration') || '';
      state.isEmergency = row.getAttribute('data-emergency') === '1';
      state.hasAddons = row.getAttribute('data-has-addons') === '1';
      updateUI();
    });
  });

  if (addonsToggle && addonsContent) {
    addonsToggle.addEventListener('click', function() {
      var open = addonsContent.hidden;
      addonsContent.hidden = !open;
      addonsToggle.setAttribute('aria-expanded', open);
      addonsWrapEl.classList.toggle('is-open', open);
    });
  }
  document.querySelectorAll('.se-book-addon-cb').forEach(function(cb) {
    cb.addEventListener('change', function() { updateUI(); });
  });

  function goToSchedule() {
    state.currentStep = 2;
    stepService.hidden = true;
    stepSchedule.hidden = false;
    stepSchedule.scrollIntoView({ behavior: 'smooth', block: 'start' });
    var total = getTotal(), deposit = getDeposit(state.servicePrice, state.isEmergency);
    if (summaryBarText) summaryBarText.textContent = state.serviceName + '  ¬∑  ' + (state.serviceDuration||'‚Äî') + '  ¬∑  $' + total + ' total  ¬∑  $' + deposit + ' deposit due at next step';
    renderCalendar();
    timesWrap.hidden = true;
    cancelCard.hidden = true;
    continuePaymentBtn.disabled = true;
    state.selectedDay = null; state.selectedTime = null;
    stickyBtn.textContent = 'Continue to Payment ‚Üí';
    stickyBtn.disabled = true;
  }

  function getDaysInMonth(y, m) { return new Date(y, m, 0).getDate(); }
  function renderCalendar() {
    if (!calendarDaysEl || !calendarMonthEl) return;
    var y = state.calYear, m = state.calMonth;
    var firstDay = new Date(y, m - 1, 1).getDay();
    var startMon = (firstDay + 6) % 7;
    var daysInMonth = getDaysInMonth(y, m);
    var isThisMonth = y === DEMO_TODAY.year && m === DEMO_TODAY.month;
    calendarMonthEl.textContent = MONTH_NAMES[m] + ' ' + y;
    var html = '';
    for (var i = 0; i < startMon; i++) html += '<span class="se-book-calendar-day is-empty"></span>';
    for (var d = 1; d <= daysInMonth; d++) {
      var isSun = new Date(y, m - 1, d).getDay() === 0;
      var isToday = isThisMonth && d === DEMO_TODAY.day;
      var selected = state.selectedDay === d && state.calMonth === m && state.calYear === y;
      var cls = 'se-book-calendar-day';
      if (isSun) cls += ' is-closed';
      else if (isToday) cls += ' is-today';
      if (selected) cls += ' is-selected';
      var label = MONTH_NAMES[m] + ' ' + d + ', ' + y;
      if (isSun) html += '<button type="button" class="' + cls + '" disabled aria-label="' + label + ' Closed">‚Äî</button>';
      else html += '<button type="button" class="' + cls + '" data-day="' + d + '" aria-label="' + label + '">' + d + '</button>';
    }
    calendarDaysEl.innerHTML = html;
    calendarDaysEl.querySelectorAll('.se-book-calendar-day[data-day]').forEach(function(btn) {
      btn.addEventListener('click', function() {
        var day = parseInt(btn.getAttribute('data-day'), 10);
        state.selectedDay = day;
        state.selectedDateLabel = MONTH_NAMES[state.calMonth] + ' ' + day + ', ' + state.calYear;
        document.querySelectorAll('.se-book-calendar-day').forEach(function(b) { b.classList.remove('is-selected'); });
        btn.classList.add('is-selected');
        timesWrap.hidden = false;
        state.selectedTime = null;
        document.querySelectorAll('.se-book-time-row:not(:disabled)').forEach(function(r) { r.classList.remove('is-selected'); });
        cancelCard.hidden = true;
        continuePaymentBtn.disabled = true;
      });
    });
  }

  function formatCancelDeadline(day, month, year, timeStr) {
    var d = new Date(year, month - 1, day);
    d.setDate(d.getDate() - 1);
    return d.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' }) + ' at ' + (timeStr || '2:00 PM');
  }
  function formatShortDate(day, month, year) {
    return new Date(year, month - 1, day).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' });
  }
  function formatDeadlineShort(day, month, year, timeStr) {
    var d = new Date(year, month - 1, day);
    d.setDate(d.getDate() - 1);
    return d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }) + ' ‚Ä¢ ' + (timeStr || '2:00 PM');
  }

  document.querySelectorAll('.se-book-time-row:not(:disabled)').forEach(function(row) {
    row.addEventListener('click', function() {
      document.querySelectorAll('.se-book-time-row').forEach(function(r) { r.classList.remove('is-selected'); });
      row.classList.add('is-selected');
      state.selectedTime = row.getAttribute('data-time');
      state.selectedTimeMin = row.getAttribute('data-min') ? parseInt(row.getAttribute('data-min'), 10) : 540;
      cancelCard.hidden = false;
      if (cancelDeadlineEl) cancelDeadlineEl.textContent = formatCancelDeadline(state.selectedDay, state.calMonth, state.calYear, state.selectedTime);
      if (cancelDepositEl) cancelDepositEl.textContent = '$' + getDeposit(state.servicePrice, state.isEmergency);
      continuePaymentBtn.disabled = false;
      stickyBtn.disabled = false;
    });
  });

  document.getElementById('se-cal-prev').addEventListener('click', function() {
    if (state.calMonth === 1) { state.calMonth = 12; state.calYear--; } else state.calMonth--;
    renderCalendar();
  });
  document.getElementById('se-cal-next').addEventListener('click', function() {
    if (state.calMonth === 12) { state.calMonth = 1; state.calYear++; } else state.calMonth++;
    renderCalendar();
  });

  continuePaymentBtn.addEventListener('click', function() {
    if (continuePaymentBtn.disabled) return;
    state.currentStep = 3;
    stepSchedule.hidden = true;
    stickyBar.hidden = true;
    stepPayment.hidden = false;
    stepPayment.scrollIntoView({ behavior: 'smooth', block: 'start' });
    var total = getTotal(), deposit = getDeposit(state.servicePrice, state.isEmergency), balance = total - deposit;
    var timeStr = state.selectedTime || '2:00 PM';
    var subhead = document.getElementById('se-payment-subhead');
    if (subhead) subhead.textContent = 'A $' + deposit + ' deposit confirms your ' + state.serviceName + ' appointment on ' + (state.selectedDateLabel || '') + ' at ' + timeStr + '.';
    var set = function(id, t) { var el = document.getElementById(id); if (el) el.textContent = t; };
    set('se-confirm-service', state.serviceName);
    set('se-confirm-datetime', (state.selectedDateLabel || '') + ' ¬∑ ' + timeStr + ' ¬∑ ' + (state.serviceDuration || ''));
    set('se-confirm-total', '$' + total + '.00');
    set('se-confirm-deposit', '$' + deposit + '.00');
    set('se-confirm-balance', '$' + balance + '.00');
    set('se-confirm-deadline', state.selectedDay ? formatDeadlineShort(state.selectedDay, state.calMonth, state.calYear, timeStr) : '‚Äî');
    var printEl = document.getElementById('se-confirm-print');
    if (printEl) printEl.textContent = 'Deposits are processed securely via Stripe. Your $' + deposit + ' will be applied to your $' + total + ' service total.';
    if (payBtnText) payBtnText.textContent = 'Pay $' + deposit + ' Deposit';
  });

  paymentForm.addEventListener('submit', function(e) {
    e.preventDefault();
    payBtn.disabled = true;
    payBtn.textContent = 'Processing‚Ä¶';
    setTimeout(function() {
      stepPayment.hidden = true;
      stepSuccess.hidden = false;
      stepSuccess.scrollIntoView({ behavior: 'smooth', block: 'start' });
      var deposit = getDeposit(state.servicePrice, state.isEmergency), total = getTotal(), balance = total - deposit;
      var timeStr = state.selectedTime || '2:00 PM';
      var set = function(id, t) { var el = document.getElementById(id); if (el) el.textContent = t; };
      set('se-success-service', state.serviceName);
      set('se-success-date', state.selectedDay ? formatShortDate(state.selectedDay, state.calMonth, state.calYear).replace(', ' + state.calYear, '') : '');
      set('se-success-time', timeStr);
      set('se-success-deposit', '$' + deposit);
      set('se-success-balance', '$' + balance);
      set('se-success-deadline', state.selectedDay ? formatDeadlineShort(state.selectedDay, state.calMonth, state.calYear, timeStr).replace(' ‚Ä¢ ', ' at ') : '');
      var calLink = document.getElementById('se-success-calendar');
      if (calLink && state.selectedDay) {
        var d = new Date(state.calYear, state.calMonth - 1, state.selectedDay);
        var match = (state.selectedTime||'').match(/(\d+):(\d+)\s*(AM|PM)/i);
        var hour = match ? parseInt(match[1],10) : 10, min = match ? parseInt(match[2],10)||0 : 0;
        if (match && (match[3]||'').toUpperCase()==='PM' && hour<12) hour+=12;
        if (match && (match[3]||'').toUpperCase()==='AM' && hour===12) hour=0;
        d.setHours(hour, min, 0, 0);
        var end = new Date(d.getTime() + 60*60*1000);
        var title = encodeURIComponent((state.serviceName||'Appointment') + ' at SouthEnd Climate Co.');
        var s = d.toISOString().replace(/[-:]/g,'').slice(0,15), e2 = end.toISOString().replace(/[-:]/g,'').slice(0,15);
        calLink.href = 'https://calendar.google.com/calendar/render?action=TEMPLATE&text=' + title + '&dates=' + s + 'Z/' + e2 + 'Z';
      }
      payBtn.disabled = false;
      payBtnText.textContent = 'Pay $' + getDeposit(state.servicePrice, state.isEmergency) + ' Deposit';
    }, 1200);
  });

  stickyBtn.addEventListener('click', function() {
    if (stickyBtn.disabled) return;
    if (state.currentStep === 1) goToSchedule();
    else if (state.currentStep === 2) continuePaymentBtn.click();
  });

  document.getElementById('se-whats-toggle').addEventListener('click', function() {
    var c = document.getElementById('se-whats-content');
    var open = c.hidden;
    c.hidden = !open;
    this.setAttribute('aria-expanded', open);
    this.closest('.se-book-whats-wrap').classList.toggle('is-open', open);
  });
  document.getElementById('se-what-happens-toggle').addEventListener('click', function() {
    var c = document.getElementById('se-what-happens-content');
    var open = c.hidden;
    c.hidden = !open;
    this.setAttribute('aria-expanded', open);
  });

  var params = new URLSearchParams(window.location.search);
  var pre = params.get('service');
  if (pre) {
    var map = { 'ac':'AC Repair','ac-repair':'AC Repair','heating':'Heating Repair','heating-repair':'Heating Repair','emergency':'Emergency Service','ac-installation':'AC Installation','heating-installation':'Heating Installation','thermostat':'Thermostat Installation','tune-up':'Seasonal Tune-Up','maintenance':'Seasonal Tune-Up','maintenance-plan':'Seasonal Tune-Up','duct-cleaning':'Duct Cleaning','air-quality':'Air Quality Assessment' };
    var name = map[pre.toLowerCase()] || pre;
    var row = document.querySelector('.se-book-service-row[data-service="' + name + '"]');
    if (row) { row.click(); row.scrollIntoView({ behavior: 'smooth', block: 'center' }); }
  }
})();
  </script>
  <script>
    document.querySelector('.se-menu-toggle').addEventListener('click', function() {
      document.querySelector('.se-nav').classList.toggle('is-open');
    });
  </script>
</body>
</html>
